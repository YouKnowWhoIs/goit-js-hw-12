{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nexport function renderTicker(data) {\n  const markup = data.hits.map(templateImage).join('');\n  gallery.innerHTML = markup;\n\n  const galleryLinks = document.querySelectorAll('.gallery-link');\n  galleryLinks.forEach(link => {\n    link.setAttribute('href', link.querySelector('img').getAttribute('src'));\n  });\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n}\n\nfunction templateImage(article) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = article;\n  return `<li class=\"gallery-item\" >\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n    <div class=\"item-text\">\n      <ul>Likes<li>${likes}</li></ul>\n      <ul>Views<li>${views}</li></ul>\n      <ul>Comments<li>${comments}</li></ul>\n      <ul>Downloads<li>${downloads}</li></ul>\n    </div>\n  </li>`;\n}\n\nexport function templateImages(articles) {\n  return articles.map(templateImage).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nimport { renderTicker } from './render-functions.js';\n\nconst loader = document.querySelector('.loader');\n\nexport async function fetchImages(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const KEY = '42272316-28c697ce0580eb37211383c7d';\n  const IMAGE_TYPE = 'image_type=photo';\n  const ORIENTATION = '&orientation=horizontal';\n  const SAFESEARCH = '&safesearch=true';\n  const url = `${BASE_URL}?key=${KEY}&${IMAGE_TYPE}${ORIENTATION}${SAFESEARCH}`;\n\n  const params = {\n    key: KEY,\n    q: query,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  try {\n    const response = await axios.get(url, { params });\n    if (response.data && response.data.hits && response.data.hits.length > 0) {\n      renderTicker(response.data);\n    } else {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n    return response.data;\n  } catch (error) {\n    console.error('Error:', error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { templateImages } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnloadmore = document.querySelector('.load_button');\n\nform.addEventListener('submit', onCreateFormSubmit);\nbtnloadmore.addEventListener('click', onLoadMoreItems);\n\nlet query;\nlet page;\nlet maxPage;\n\nasync function onCreateFormSubmit(event) {\n  event.preventDefault();\n  query = event.target.elements.query.value.trim();\n  page = 1;\n  if (query === '') {\n    return iziToast.error({\n      message: 'Please enter a search query.',\n      position: 'topRight',\n    });\n  }\n\n  loader.style.display = 'inline-block';\n\n  gallery.innerHTML = '';\n  const data = await fetchImages(query, page);\n  console.log(data);\n  maxPage = Math.ceil(data.totalHits / 15);\n  // renderArticle(data.article);\n\n  checkBtnVisibleStatus();\n  event.target.reset();\n}\n\nasync function onLoadMoreItems() {\n  page += 1;\n  const data = await fetchImages(query, page);\n  renderArticle(data.articles);\n  checkBtnVisibleStatus();\n}\n\nfunction renderArticle(articles) {\n  const markup = templateImages(articles);\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoadBtn() {\n  btnloadmore.classList.remove('hidden');\n}\n\nfunction hiddenLoadBtn() {\n  btnloadmore.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hiddenLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}\n"],"names":["gallery","renderTicker","data","markup","templateImage","link","SimpleLightbox","article","largeImageURL","webformatURL","tags","likes","views","comments","downloads","templateImages","articles","loader","fetchImages","query","currentPage","BASE_URL","KEY","url","params","response","axios","iziToast","error","form","btnloadmore","onCreateFormSubmit","onLoadMoreItems","page","maxPage","event","checkBtnVisibleStatus","renderArticle","showLoadBtn","hiddenLoadBtn"],"mappings":"+vBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAM,CACjC,MAAMC,EAASD,EAAK,KAAK,IAAIE,CAAa,EAAE,KAAK,EAAE,EACnDJ,EAAQ,UAAYG,EAEC,SAAS,iBAAiB,eAAe,EACjD,QAAQE,GAAQ,CAC3BA,EAAK,aAAa,OAAQA,EAAK,cAAc,KAAK,EAAE,aAAa,KAAK,CAAC,CAC3E,CAAG,EAEgB,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EAEQ,QAAO,CAClB,CAEA,SAASF,EAAcG,EAAS,CAC9B,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,oCAC2BC,CAAa;AAAA;AAAA;AAAA,eAGlCC,CAAY;AAAA,eACZC,CAAI;AAAA;AAAA;AAAA;AAAA,qBAIEC,CAAK;AAAA,qBACLC,CAAK;AAAA,wBACFC,CAAQ;AAAA,yBACPC,CAAS;AAAA;AAAA,QAGlC,CAEO,SAASC,EAAeC,EAAU,CACvC,OAAOA,EAAS,IAAIZ,CAAa,EAAE,KAAK,EAAE,CAC5C,CC5CA,MAAMa,EAAS,SAAS,cAAc,SAAS,EAExC,eAAeC,EAAYC,EAAOC,EAAa,CACpD,MAAMC,EAAW,2BACXC,EAAM,qCAINC,EAAM,GAAGF,CAAQ,QAAQC,CAAG,2DAE5BE,EAAS,CACb,IAAKF,EACL,EAAGH,EACH,SAAU,GACV,KAAMC,CACV,EAEE,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAM,IAAIH,EAAK,CAAE,OAAAC,CAAM,CAAE,EAChD,OAAIC,EAAS,MAAQA,EAAS,KAAK,MAAQA,EAAS,KAAK,KAAK,OAAS,EACrExB,EAAawB,EAAS,IAAI,EAE1BE,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EAEIF,EAAS,IACjB,OAAQG,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CACjC,QAAY,CACRX,EAAO,MAAM,QAAU,MACxB,CACH,CCnCA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrC7B,EAAU,SAAS,cAAc,UAAU,EAC3CiB,EAAS,SAAS,cAAc,SAAS,EACzCa,EAAc,SAAS,cAAc,cAAc,EAEzDD,EAAK,iBAAiB,SAAUE,CAAkB,EAClDD,EAAY,iBAAiB,QAASE,CAAe,EAErD,IAAIb,EACAc,EACAC,EAEJ,eAAeH,EAAmBI,EAAO,CAIvC,GAHAA,EAAM,eAAc,EACpBhB,EAAQgB,EAAM,OAAO,SAAS,MAAM,MAAM,OAC1CF,EAAO,EACHd,IAAU,GACZ,OAAOQ,EAAS,MAAM,CACpB,QAAS,+BACT,SAAU,UAChB,CAAK,EAGHV,EAAO,MAAM,QAAU,eAEvBjB,EAAQ,UAAY,GACpB,MAAME,EAAO,MAAMgB,EAAYC,EAAOc,CAAI,EAC1C,QAAQ,IAAI/B,CAAI,EAChBgC,EAAU,KAAK,KAAKhC,EAAK,UAAY,EAAE,EAGvCkC,IACAD,EAAM,OAAO,OACf,CAEA,eAAeH,GAAkB,CAC/BC,GAAQ,EACR,MAAM/B,EAAO,MAAMgB,EAAYC,EAAOc,CAAI,EAC1CI,EAAcnC,EAAK,QAAQ,EAC3BkC,GACF,CAEA,SAASC,EAAcrB,EAAU,CAC/B,MAAMb,EAASY,EAAeC,CAAQ,EACtChB,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,CAEA,SAASmC,GAAc,CACrBR,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASS,GAAgB,CACvBT,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASM,GAAwB,CAC3BH,GAAQC,EACVK,IAEAD,GAEJ"}